<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecological Models Simulation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .tab-btn {
            flex: 1;
            padding: 15px;
            background: var(--light-color);
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .tab-btn.active {
            background: var(--secondary-color);
            color: white;
        }
        
        .tab-btn:hover:not(.active) {
            background: #d6dbdf;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .model-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        input[type="number"], input[type="range"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        input[type="range"] {
            padding: 0;
            border: none;
        }
        
        .btn {
            padding: 12px 20px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background 0.3s ease;
            margin-right: 10px;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn-download {
            background: var(--accent-color);
        }
        
        .btn-download:hover {
            background: #c0392b;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 25px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
        }
        
        .charts-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .chart-half {
            flex: 1 1 calc(50% - 20px);
            min-width: 300px;
        }
        
        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .model-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 25px;
            border-left: 4px solid var(--secondary-color);
        }
        
        .model-info h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .k-value-display {
            background: var(--light-color);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: monospace;
        }
        
        .k-value {
            margin: 5px 0;
            padding: 5px;
            background: white;
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            .model-controls {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .chart-half {
                flex: 1 1 100%;
            }
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .slider-value {
            min-width: 50px;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ecological Models Simulation</h1>
            <p class="description">Interactive simulations of Logistic Growth, Predator-Prey, and Interspecific Competition models</p>
        </header>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="logistic">Logistic Growth</button>
            <button class="tab-btn" data-tab="predator-prey">Predator-Prey</button>
            <button class="tab-btn" data-tab="competition">Interspecific Competition</button>
        </div>
        
        <div class="tab-content active" id="logistic-content">
            <h2>Logistic Growth Model</h2>
            <p>Model equation: dN/dt = rN(1 - N/K)</p>
            
            <div class="model-controls">
                <div class="control-group">
                    <label for="logistic-r">Growth rate (r)</label>
                    <div class="slider-container">
                        <input type="range" id="logistic-r-slider" min="0.1" max="2" step="0.01" value="0.4">
                        <span class="slider-value" id="logistic-r-value">0.4</span>
                    </div>
                    <input type="number" id="logistic-r" step="0.01" value="0.4" min="0.1" max="2">
                </div>
                <div class="control-group">
                    <label for="logistic-k">Carrying capacity (K)</label>
                    <div class="slider-container">
                        <input type="range" id="logistic-k-slider" min="100" max="5000" step="10" value="1000">
                        <span class="slider-value" id="logistic-k-value">1000</span>
                    </div>
                    <input type="number" id="logistic-k" value="1000" min="100" max="5000">
                </div>
                <div class="control-group">
                    <label for="logistic-n0">Initial population (N₀)</label>
                    <div class="slider-container">
                        <input type="range" id="logistic-n0-slider" min="1" max="1000" step="1" value="10">
                        <span class="slider-value" id="logistic-n0-value">10</span>
                    </div>
                    <input type="number" id="logistic-n0" value="10" min="1" max="1000">
                </div>
                <div class="control-group">
                    <label for="logistic-time">Time range</label>
                    <div class="slider-container">
                        <input type="range" id="logistic-time-slider" min="10" max="200" step="1" value="50">
                        <span class="slider-value" id="logistic-time-value">50</span>
                    </div>
                    <input type="number" id="logistic-time" value="50" min="10" max="200">
                </div>
            </div>
            
            <div class="charts-row">
                <div class="chart-half">
                    <div class="chart-container">
                        <canvas id="logistic-chart"></canvas>
                    </div>
                </div>
                <div class="chart-half">
                    <div class="chart-container">
                        <canvas id="logistic-rate-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="k-value-display">
                <h3>Changing Rate (K) Values</h3>
                <div class="k-value" id="logistic-k-display">Current K: 1000</div>
                <div class="k-value" id="logistic-dndt-display">Current dN/dt: 0</div>
            </div>
            
            <div class="actions">
                <button class="btn" id="run-logistic">Run Simulation</button>
                <button class="btn btn-download" id="download-logistic">Download Data</button>
            </div>
            
            <div class="model-info">
                <h3>About the Logistic Growth Model</h3>
                <p>The logistic growth model describes how populations grow in limited resource environments, considering the carrying capacity (K) as a limiting factor.</p>
                <p>Model equation: dN/dt = rN(1 - N/K)</p>
                <p>Analytical solution: N(t) = K / [1 + ((K - N₀)/N₀)e^(-rt)]</p>
            </div>
        </div>
        
        <div class="tab-content" id="predator-prey-content">
            <h2>Lotka-Volterra Predator-Prey Model</h2>
            <p>Model equations: </p>
            <p>dx/dt = αx - βxy</p>
            <p>dy/dt = δβxy - γy</p>
            
            <div class="model-controls">
                <div class="control-group">
                    <label for="pp-alpha">Prey growth rate (α)</label>
                    <div class="slider-container">
                        <input type="range" id="pp-alpha-slider" min="0.1" max="2" step="0.01" value="0.4">
                        <span class="slider-value" id="pp-alpha-value">0.4</span>
                    </div>
                    <input type="number" id="pp-alpha" step="0.01" value="0.4" min="0.1" max="2">
                </div>
                <div class="control-group">
                    <label for="pp-beta">Predation rate (β)</label>
                    <div class="slider-container">
                        <input type="range" id="pp-beta-slider" min="0.1" max="2" step="0.01" value="0.4">
                        <span class="slider-value" id="pp-beta-value">0.4</span>
                    </div>
                    <input type="number" id="pp-beta" step="0.01" value="0.4" min="0.1" max="2">
                </div>
                <div class="control-group">
                    <label for="pp-delta">Conversion efficiency (δ)</label>
                    <div class="slider-container">
                        <input type="range" id="pp-delta-slider" min="0.01" max="0.5" step="0.01" value="0.09">
                        <span class="slider-value" id="pp-delta-value">0.09</span>
                    </div>
                    <input type="number" id="pp-delta" step="0.01" value="0.09" min="0.01" max="0.5">
                </div>
                <div class="control-group">
                    <label for="pp-gamma">Predator mortality rate (γ)</label>
                    <div class="slider-container">
                        <input type="range" id="pp-gamma-slider" min="0.1" max="5" step="0.1" value="2.0">
                        <span class="slider-value" id="pp-gamma-value">2.0</span>
                    </div>
                    <input type="number" id="pp-gamma" step="0.1" value="2.0" min="0.1" max="5">
                </div>
                <div class="control-group">
                    <label for="pp-prey0">Initial prey population</label>
                    <div class="slider-container">
                        <input type="range" id="pp-prey0-slider" min="1" max="1000" step="1" value="100">
                        <span class="slider-value" id="pp-prey0-value">100</span>
                    </div>
                    <input type="number" id="pp-prey0" value="100" min="1" max="1000">
                </div>
                <div class="control-group">
                    <label for="pp-predator0">Initial predator population</label>
                    <div class="slider-container">
                        <input type="range" id="pp-predator0-slider" min="1" max="100" step="1" value="8">
                        <span class="slider-value" id="pp-predator0-value">8</span>
                    </div>
                    <input type="number" id="pp-predator0" value="8" min="1" max="100">
                </div>
                <div class="control-group">
                    <label for="pp-time">Time range</label>
                    <div class="slider-container">
                        <input type="range" id="pp-time-slider" min="10" max="200" step="1" value="100">
                        <span class="slider-value" id="pp-time-value">100</span>
                    </div>
                    <input type="number" id="pp-time" value="100" min="10" max="200">
                </div>
                <div class="control-group">
                    <label for="pp-dt">Time step (Δt)</label>
                    <div class="slider-container">
                        <input type="range" id="pp-dt-slider" min="0.001" max="0.1" step="0.001" value="0.01">
                        <span class="slider-value" id="pp-dt-value">0.01</span>
                    </div>
                    <input type="number" id="pp-dt" step="0.001" value="0.01" min="0.001" max="0.1">
                </div>
            </div>
            
            <div class="charts-row">
                <div class="chart-half">
                    <div class="chart-container">
                        <canvas id="pp-chart"></canvas>
                    </div>
                </div>
                <div class="chart-half">
                    <div class="chart-container">
                        <canvas id="pp-rate-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="k-value-display">
                <h3>Changing Rate Values</h3>
                <div class="k-value" id="pp-prey-rate-display">Current Prey dx/dt: 0</div>
                <div class="k-value" id="pp-predator-rate-display">Current Predator dy/dt: 0</div>
            </div>
            
            <div class="actions">
                <button class="btn" id="run-pp">Run Simulation</button>
                <button class="btn btn-download" id="download-pp">Download Data</button>
            </div>
            
            <div class="model-info">
                <h3>About the Lotka-Volterra Model</h3>
                <p>The Lotka-Volterra model describes the dynamics of predator-prey interactions, showing how both populations fluctuate over time.</p>
                <p>Model equations: </p>
                <p>dx/dt = αx - βxy (Prey change rate)</p>
                <p>dy/dt = δβxy - γy (Predator change rate)</p>
            </div>
        </div>
        
        <div class="tab-content" id="competition-content">
            <h2>Interspecific Competition Model</h2>
            <p>Model equations: </p>
            <p>dN₁/dt = r₁N₁ (1 − (N₁ + αN₂)/K₁)</p>
            <p>dN₂/dt = r₂N₂ (1 − (N₂ + βN₁)/K₂)</p>
            
            <div class="model-controls">
                <div class="control-group">
                    <label for="comp-r1">Species 1 growth rate (r₁)</label>
                    <div class="slider-container">
                        <input type="range" id="comp-r1-slider" min="0.1" max="2" step="0.01" value="0.5">
                        <span class="slider-value" id="comp-r1-value">0.5</span>
                    </div>
                    <input type="number" id="comp-r1" step="0.01" value="0.5" min="0.1" max="2">
                </div>
                <div class="control-group">
                    <label for="comp-r2">Species 2 growth rate (r₂)</label>
                    <div class="slider-container">
                        <input type="range" id="comp-r2-slider" min="0.1" max="2" step="0.01" value="0.5">
                        <span class="slider-value" id="comp-r2-value">0.5</span>
                    </div>
                    <input type="number" id="comp-r2" step="0.01" value="0.5" min="0.1" max="2">
                </div>
                <div class="control-group">
                    <label for="comp-k1">Species 1 carrying capacity (K₁)</label>
                    <div class="slider-container">
                        <input type="range" id="comp-k1-slider" min="100" max="5000" step="10" value="700">
                        <span class="slider-value" id="comp-k1-value">700</span>
                    </div>
                    <input type="number" id="comp-k1" value="700" min="100" max="5000">
                </div>
                <div class="control-group">
                    <label for="comp-k2">Species 2 carrying capacity (K₂)</label>
                    <div class="slider-container">
                        <input type="range" id="comp-k2-slider" min="100" max="5000" step="10" value="400">
                        <span class="slider-value" id="comp-k2-value">400</span>
                    </div>
                    <input type="number" id="comp-k2" value="400" min="100" max="5000">
                </div>
                <div class="control-group">
                    <label for="comp-alpha">Competition coefficient (α)</label>
                    <div class="slider-container">
                        <input type="range" id="comp-alpha-slider" min="0.1" max="2" step="0.01" value="1.0">
                        <span class="slider-value" id="comp-alpha-value">1.0</span>
                    </div>
                    <input type="number" id="comp-alpha" step="0.01" value="1.0" min="0.1" max="2">
                </div>
                <div class="control-group">
                    <label for="comp-beta">Competition coefficient (β)</label>
                    <div class="slider-container">
                        <input type="range" id="comp-beta-slider" min="0.1" max="2" step="0.01" value="1.0">
                        <span class="slider-value" id="comp-beta-value">1.0</span>
                    </div>
                    <input type="number" id="comp-beta" step="0.01" value="1.0" min="0.1" max="2">
                </div>
                <div class="control-group">
                    <label for="comp-n01">Initial Species 1 population</label>
                    <div class="slider-container">
                        <input type="range" id="comp-n01-slider" min="1" max="1000" step="1" value="100">
                        <span class="slider-value" id="comp-n01-value">100</span>
                    </div>
                    <input type="number" id="comp-n01" value="100" min="1" max="1000">
                </div>
                <div class="control-group">
                    <label for="comp-n02">Initial Species 2 population</label>
                    <div class="slider-container">
                        <input type="range" id="comp-n02-slider" min="1" max="1000" step="1" value="100">
                        <span class="slider-value" id="comp-n02-value">100</span>
                    </div>
                    <input type="number" id="comp-n02" value="100" min="1" max="1000">
                </div>
                <div class="control-group">
                    <label for="comp-time">Time range</label>
                    <div class="slider-container">
                        <input type="range" id="comp-time-slider" min="10" max="200" step="1" value="50">
                        <span class="slider-value" id="comp-time-value">50</span>
                    </div>
                    <input type="number" id="comp-time" value="50" min="10" max="200">
                </div>
                <div class="control-group">
                    <label for="comp-dt">Time step (Δt)</label>
                    <div class="slider-container">
                        <input type="range" id="comp-dt-slider" min="0.001" max="0.1" step="0.001" value="0.01">
                        <span class="slider-value" id="comp-dt-value">0.01</span>
                    </div>
                    <input type="number" id="comp-dt" step="0.001" value="0.01" min="0.001" max="0.1">
                </div>
            </div>
            
            <div class="charts-row">
                <div class="chart-half">
                    <div class="chart-container">
                        <canvas id="comp-chart"></canvas>
                    </div>
                </div>
                <div class="chart-half">
                    <div class="chart-container">
                        <canvas id="comp-rate-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="k-value-display">
                <h3>Changing Rate Values</h3>
                <div class="k-value" id="comp-species1-rate-display">Current Species 1 dN₁/dt: 0</div>
                <div class="k-value" id="comp-species2-rate-display">Current Species 2 dN₂/dt: 0</div>
            </div>
            
            <div class="actions">
                <button class="btn" id="run-comp">Run Simulation</button>
                <button class="btn btn-download" id="download-comp">Download Data</button>
            </div>
            
            <div class="model-info">
                <h3>About the Interspecific Competition Model</h3>
                <p>This model describes competition between two species for limited resources, based on the Lotka-Volterra competition equations.</p>
                <p>Model equations: </p>
                <p>dN₁/dt = r₁N₁ (1 − (N₁ + αN₂)/K₁)</p>
                <p>dN₂/dt = r₂N₂ (1 − (N₂ + βN₁)/K₂)</p>
                <p>Where α represents the effect of Species 2 on Species 1, and β represents the effect of Species 1 on Species 2.</p>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.addEventListener('click', () => {
                // Remove all active states
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add current active state
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab');
                document.getElementById(`${tabId}-content`).classList.add('active');
            });
        });

        // Initialize all charts
        // Logistic Growth Chart
        const logisticCtx = document.getElementById('logistic-chart').getContext('2d');
        let logisticChart = new Chart(logisticCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Population Size',
                    data: [],
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    borderWidth: 2,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Population Size'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time'
                        }
                    }
                }
            }
        });

        // Logistic Growth Rate Chart
        const logisticRateCtx = document.getElementById('logistic-rate-chart').getContext('2d');
        let logisticRateChart = new Chart(logisticRateCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Growth Rate (dN/dt)',
                    data: [],
                    borderColor: '#e74c3c',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    borderWidth: 2,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Growth Rate'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time'
                        }
                    }
                }
            }
        });

        // Predator-Prey Chart
        const ppCtx = document.getElementById('pp-chart').getContext('2d');
        let ppChart = new Chart(ppCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'Prey Population',
                        data: [],
                        borderColor: '#2ecc71',
                        backgroundColor: 'rgba(46, 204, 113, 0.1)',
                        borderWidth: 2,
                        fill: true
                    },
                    {
                        label: 'Predator Population',
                        data: [],
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Population Size'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time'
                        }
                    }
                }
            }
        });

        // Predator-Prey Rate Chart
        const ppRateCtx = document.getElementById('pp-rate-chart').getContext('2d');
        let ppRateChart = new Chart(ppRateCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'Prey Change Rate (dx/dt)',
                        data: [],
                        borderColor: '#2ecc71',
                        backgroundColor: 'rgba(46, 204, 113, 0.1)',
                        borderWidth: 2,
                        fill: true
                    },
                    {
                        label: 'Predator Change Rate (dy/dt)',
                        data: [],
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Change Rate'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time'
                        }
                    }
                }
            }
        });

        // Competition Chart
        const compCtx = document.getElementById('comp-chart').getContext('2d');
        let compChart = new Chart(compCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'Species 1 Population',
                        data: [],
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 2,
                        fill: true
                    },
                    {
                        label: 'Species 2 Population',
                        data: [],
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Population Size'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time'
                        }
                    }
                }
            }
        });

        // Competition Rate Chart
        const compRateCtx = document.getElementById('comp-rate-chart').getContext('2d');
        let compRateChart = new Chart(compRateCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'Species 1 Change Rate (dN₁/dt)',
                        data: [],
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 2,
                        fill: true
                    },
                    {
                        label: 'Species 2 Change Rate (dN₂/dt)',
                        data: [],
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Change Rate'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Time'
                        }
                    }
                }
            }
        });

        // Sync sliders with number inputs
        function syncInputAndSlider(inputId, sliderId, valueSpanId) {
            const input = document.getElementById(inputId);
            const slider = document.getElementById(sliderId);
            const valueSpan = document.getElementById(valueSpanId);
            
            input.addEventListener('input', () => {
                slider.value = input.value;
                valueSpan.textContent = input.value;
            });
            
            slider.addEventListener('input', () => {
                input.value = slider.value;
                valueSpan.textContent = slider.value;
            });
        }

        // Set up all input-slider syncs
        syncInputAndSlider('logistic-r', 'logistic-r-slider', 'logistic-r-value');
        syncInputAndSlider('logistic-k', 'logistic-k-slider', 'logistic-k-value');
        syncInputAndSlider('logistic-n0', 'logistic-n0-slider', 'logistic-n0-value');
        syncInputAndSlider('logistic-time', 'logistic-time-slider', 'logistic-time-value');
        
        syncInputAndSlider('pp-alpha', 'pp-alpha-slider', 'pp-alpha-value');
        syncInputAndSlider('pp-beta', 'pp-beta-slider', 'pp-beta-value');
        syncInputAndSlider('pp-delta', 'pp-delta-slider', 'pp-delta-value');
        syncInputAndSlider('pp-gamma', 'pp-gamma-slider', 'pp-gamma-value');
        syncInputAndSlider('pp-prey0', 'pp-prey0-slider', 'pp-prey0-value');
        syncInputAndSlider('pp-predator0', 'pp-predator0-slider', 'pp-predator0-value');
        syncInputAndSlider('pp-time', 'pp-time-slider', 'pp-time-value');
        syncInputAndSlider('pp-dt', 'pp-dt-slider', 'pp-dt-value');
        
        syncInputAndSlider('comp-r1', 'comp-r1-slider', 'comp-r1-value');
        syncInputAndSlider('comp-r2', 'comp-r2-slider', 'comp-r2-value');
        syncInputAndSlider('comp-k1', 'comp-k1-slider', 'comp-k1-value');
        syncInputAndSlider('comp-k2', 'comp-k2-slider', 'comp-k2-value');
        syncInputAndSlider('comp-alpha', 'comp-alpha-slider', 'comp-alpha-value');
        syncInputAndSlider('comp-beta', 'comp-beta-slider', 'comp-beta-value');
        syncInputAndSlider('comp-n01', 'comp-n01-slider', 'comp-n01-value');
        syncInputAndSlider('comp-n02', 'comp-n02-slider', 'comp-n02-value');
        syncInputAndSlider('comp-time', 'comp-time-slider', 'comp-time-value');
        syncInputAndSlider('comp-dt', 'comp-dt-slider', 'comp-dt-value');

        // Logistic Growth Model calculation
        function calculateLogisticGrowth() {
            const r = parseFloat(document.getElementById('logistic-r').value);
            const K = parseFloat(document.getElementById('logistic-k').value);
            const N0 = parseFloat(document.getElementById('logistic-n0').value);
            const time = parseInt(document.getElementById('logistic-time').value);
            
            const timePoints = [];
            const populationPoints = [];
            const growthRatePoints = [];
            
            for (let t = 0; t <= time; t++) {
                timePoints.push(t);
                // Using analytical solution: N(t) = K / [1 + ((K - N0)/N0)e^(-rt)]
                const Nt = K / (1 + ((K - N0) / N0) * Math.exp(-r * t));
                populationPoints.push(Nt);
                
                // Calculate growth rate: dN/dt = rN(1 - N/K)
                const growthRate = r * Nt * (1 - Nt / K);
                growthRatePoints.push(growthRate);
            }
            
            // Update charts
            logisticChart.data.labels = timePoints;
            logisticChart.data.datasets[0].data = populationPoints;
            logisticChart.update();
            
            logisticRateChart.data.labels = timePoints;
            logisticRateChart.data.datasets[0].data = growthRatePoints;
            logisticRateChart.update();
            
            // Update K value display
            document.getElementById('logistic-k-display').textContent = `Current K: ${K}`;
            document.getElementById('logistic-dndt-display').textContent = `Current dN/dt: ${growthRatePoints[growthRatePoints.length - 1].toFixed(4)}`;
            
            return { time: timePoints, population: populationPoints, growthRate: growthRatePoints };
        }

        // Lotka-Volterra Model calculation
        function calculatePredatorPrey() {
            const alpha = parseFloat(document.getElementById('pp-alpha').value);
            const beta = parseFloat(document.getElementById('pp-beta').value);
            const delta = parseFloat(document.getElementById('pp-delta').value);
            const gamma = parseFloat(document.getElementById('pp-gamma').value);
            const prey0 = parseFloat(document.getElementById('pp-prey0').value);
            const predator0 = parseFloat(document.getElementById('pp-predator0').value);
            const time = parseInt(document.getElementById('pp-time').value);
            const dt = parseFloat(document.getElementById('pp-dt').value);
            
            const timePoints = [];
            const preyPoints = [];
            const predatorPoints = [];
            const preyRatePoints = [];
            const predatorRatePoints = [];
            
            let prey = prey0;
            let predator = predator0;
            const steps = time / dt;
            
            for (let i = 0; i <= steps; i++) {
                const t = i * dt;
                timePoints.push(t);
                preyPoints.push(prey);
                predatorPoints.push(predator);
                
                // Calculate rates of change
                const dPreyDt = alpha * prey - beta * prey * predator;
                const dPredatorDt = delta * beta * prey * predator - gamma * predator;
                
                preyRatePoints.push(dPreyDt);
                predatorRatePoints.push(dPredatorDt);
                
                // Use Euler's method for numerical integration
                prey += dPreyDt * dt;
                predator += dPredatorDt * dt;
                
                // Ensure populations don't go negative
                prey = Math.max(0, prey);
                predator = Math.max(0, predator);
            }
            
            // Update charts
            ppChart.data.labels = timePoints;
            ppChart.data.datasets[0].data = preyPoints;
            ppChart.data.datasets[1].data = predatorPoints;
            ppChart.update();
            
            ppRateChart.data.labels = timePoints;
            ppRateChart.data.datasets[0].data = preyRatePoints;
            ppRateChart.data.datasets[1].data = predatorRatePoints;
            ppRateChart.update();
            
            // Update rate displays
            document.getElementById('pp-prey-rate-display').textContent = 
                `Current Prey dx/dt: ${preyRatePoints[preyRatePoints.length - 1].toFixed(4)}`;
            document.getElementById('pp-predator-rate-display').textContent = 
                `Current Predator dy/dt: ${predatorRatePoints[predatorRatePoints.length - 1].toFixed(4)}`;
            
            return { 
                time: timePoints, 
                prey: preyPoints, 
                predator: predatorPoints,
                preyRate: preyRatePoints,
                predatorRate: predatorRatePoints
            };
        }

        // Interspecific Competition Model calculation
        function calculateCompetition() {
            const r1 = parseFloat(document.getElementById('comp-r1').value);
            const r2 = parseFloat(document.getElementById('comp-r2').value);
            const K1 = parseFloat(document.getElementById('comp-k1').value);
            const K2 = parseFloat(document.getElementById('comp-k2').value);
            const alpha = parseFloat(document.getElementById('comp-alpha').value);
            const beta = parseFloat(document.getElementById('comp-beta').value);
            const N01 = parseFloat(document.getElementById('comp-n01').value);
            const N02 = parseFloat(document.getElementById('comp-n02').value);
            const time = parseInt(document.getElementById('comp-time').value);
            const dt = parseFloat(document.getElementById('comp-dt').value);
            
            const timePoints = [];
            const species1Points = [];
            const species2Points = [];
            const species1RatePoints = [];
            const species2RatePoints = [];
            
            let N1 = N01;
            let N2 = N02;
            const steps = time / dt;
            
            for (let i = 0; i <= steps; i++) {
                const t = i * dt;
                timePoints.push(t);
                species1Points.push(N1);
                species2Points.push(N2);
                
                // Calculate rates of change
                const dN1dt = r1 * N1 * (1 - (N1 + alpha * N2) / K1);
                const dN2dt = r2 * N2 * (1 - (N2 + beta * N1) / K2);
                
                species1RatePoints.push(dN1dt);
                species2RatePoints.push(dN2dt);
                
                // Use Euler's method for numerical integration
                N1 += dN1dt * dt;
                N2 += dN2dt * dt;
                
                // Ensure populations don't go negative
                N1 = Math.max(0, N1);
                N2 = Math.max(0, N2);
            }
            
            // Update charts
            compChart.data.labels = timePoints;
            compChart.data.datasets[0].data = species1Points;
            compChart.data.datasets[1].data = species2Points;
            compChart.update();
            
            compRateChart.data.labels = timePoints;
            compRateChart.data.datasets[0].data = species1RatePoints;
            compRateChart.data.datasets[1].data = species2RatePoints;
            compRateChart.update();
            
            // Update rate displays
            document.getElementById('comp-species1-rate-display').textContent = 
                `Current Species 1 dN₁/dt: ${species1RatePoints[species1RatePoints.length - 1].toFixed(4)}`;
            document.getElementById('comp-species2-rate-display').textContent = 
                `Current Species 2 dN₂/dt: ${species2RatePoints[species2RatePoints.length - 1].toFixed(4)}`;
            
            return { 
                time: timePoints, 
                species1: species1Points, 
                species2: species2Points,
                species1Rate: species1RatePoints,
                species2Rate: species2RatePoints
            };
        }

        // Data download functionality
        function downloadCSV(data, filename) {
            const csvContent = "data:text/csv;charset=utf-8," + data;
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", filename);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Bind button events
        document.getElementById('run-logistic').addEventListener('click', () => {
            calculateLogisticGrowth();
        });
        
        document.getElementById('run-pp').addEventListener('click', () => {
            calculatePredatorPrey();
        });
        
        document.getElementById('run-comp').addEventListener('click', () => {
            calculateCompetition();
        });
        
        document.getElementById('download-logistic').addEventListener('click', () => {
            const data = calculateLogisticGrowth();
            let csv = "Time,Population,GrowthRate\n";
            for (let i = 0; i < data.time.length; i++) {
                csv += `${data.time[i]},${data.population[i]},${data.growthRate[i]}\n`;
            }
            downloadCSV(csv, "logistic_growth_data.csv");
        });
        
        document.getElementById('download-pp').addEventListener('click', () => {
            const data = calculatePredatorPrey();
            let csv = "Time,PreyPopulation,PredatorPopulation,PreyRate,PredatorRate\n";
            for (let i = 0; i < data.time.length; i++) {
                csv += `${data.time[i]},${data.prey[i]},${data.predator[i]},${data.preyRate[i]},${data.predatorRate[i]}\n`;
            }
            downloadCSV(csv, "predator_prey_data.csv");
        });
        
        document.getElementById('download-comp').addEventListener('click', () => {
            const data = calculateCompetition();
            let csv = "Time,Species1,Species2,Species1Rate,Species2Rate\n";
            for (let i = 0; i < data.time.length; i++) {
                csv += `${data.time[i]},${data.species1[i]},${data.species2[i]},${data.species1Rate[i]},${data.species2Rate[i]}\n`;
            }
            downloadCSV(csv, "competition_data.csv");
        });

        // Initialize simulations on page load
        window.addEventListener('load', () => {
            calculateLogisticGrowth();
            calculatePredatorPrey();
            calculateCompetition();
        });
    </script>
</body>
</html>